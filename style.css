:root{
  /* Darko-ish palette */
  --bg0:#050507;
  --bg1:#07070b;
  --fg:#f2f2f2;
  --muted:rgba(242,242,242,.68);
  --line:rgba(242,242,242,.12);

  --pink:#ff3bd4;
  --cyan:#38e8ff;
  --acid:#b6ff2e;

  --card:rgba(255,255,255,.045);
  --card2:rgba(255,255,255,.07);

  --shadow: 0 25px 80px rgba(0,0,0,.70);
  --radius: 18px;

  --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  --sans: system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  color:var(--fg);
  font-family:var(--sans);
  overflow-x:hidden;

  /* Base industrial night */
  background:
    radial-gradient(1200px 700px at 20% -10%, rgba(255,59,212,.10), transparent 55%),
    radial-gradient(900px 600px at 80% 120%, rgba(56,232,255,.08), transparent 60%),
    radial-gradient(700px 500px at 55% 40%, rgba(255,255,255,.05), transparent 55%),
    linear-gradient(180deg, var(--bg1), var(--bg0) 55%, #040406);
}

/* Film grain + scanlines overlay */
body::before, body::after{
  content:"";
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:999;
}
body::before{
  opacity:.10;
  background-image:
    repeating-linear-gradient(
      to bottom,
      rgba(255,255,255,.05) 0px,
      rgba(255,255,255,.05) 1px,
      transparent 2px,
      transparent 5px
    );
  mix-blend-mode:overlay;
}
body::after{
  opacity:.16;
  background-image:
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='160'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='160' height='160' filter='url(%23n)' opacity='.35'/%3E%3C/svg%3E");
  mix-blend-mode:soft-light;
  animation: grainMove 7s steps(7) infinite;
}
@keyframes grainMove{
  0%{ transform:translate(0,0); }
  10%{ transform:translate(-2%,1%); }
  20%{ transform:translate(-1%,-2%); }
  30%{ transform:translate(2%,2%); }
  40%{ transform:translate(1%,-1%); }
  50%{ transform:translate(-2%,2%); }
  60%{ transform:translate(2%,-2%); }
  70%{ transform:translate(1%,2%); }
  80%{ transform:translate(-1%,1%); }
  90%{ transform:translate(2%,1%); }
  100%{ transform:translate(0,0); }
}

a{ color:inherit; }
::selection{ background: rgba(255,59,212,.28); }

/* HERO */
.hero{
  min-height:100vh;
  display:grid;
  place-items:center;
  padding: 54px 20px 70px;
  position:relative;
}
.scrollHint{
  position:absolute;
  bottom:18px;
  font-family:var(--mono);
  opacity:.55;
  font-size:12px;
  letter-spacing:.14em;
  text-transform:uppercase;
}

/* Envelope area */
.envelope-wrap{
  position:relative;
  width:min(740px, 94vw);
  display:grid;
  place-items:center;
}

/* “Darko panel” look */
.envelope{
  width:min(740px, 94vw);
  height:min(380px, 48vw);
  max-height:380px;
  border-radius: 22px;
  border: 1px solid rgba(255,255,255,.12);
  background:
    radial-gradient(900px 420px at 50% 0%, rgba(255,59,212,.10), transparent 60%),
    radial-gradient(700px 420px at 85% 120%, rgba(56,232,255,.08), transparent 55%),
    linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
  box-shadow: var(--shadow);
  position:relative;
  cursor:pointer;
  padding:0;
  outline:none;
  display:block;
  overflow:hidden;
  transform: translateZ(0);
}

.envelope:focus-visible{
  box-shadow: 0 0 0 2px rgba(255,59,212,.35), var(--shadow);
}

.envelope__label{
  position:absolute;
  left: 22px;
  top: 18px;
  font-family:var(--mono);
  font-size:12px;
  letter-spacing:.14em;
  text-transform:uppercase;
  opacity:.65;
  pointer-events:none;
}

.envelope__back{
  position:absolute; inset:0;
  background:
    radial-gradient(800px 260px at 20% 40%, rgba(255,255,255,.06), transparent 60%),
    radial-gradient(600px 240px at 80% 70%, rgba(255,255,255,.04), transparent 60%);
}

.envelope__front{
  position:absolute; left:0; right:0; bottom:0;
  height: 62%;
  background:
    linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.02));
  border-top: 1px solid rgba(255,255,255,.14);
  clip-path: polygon(0 0, 50% 55%, 100% 0, 100% 100%, 0 100%);
}

.envelope__flap{
  position:absolute; left:0; right:0; top:0;
  height: 62%;
  background:
    linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.02));
  border-bottom: 1px solid rgba(255,255,255,.14);
  transform-origin: top center;
  transform: rotateX(0deg);
  transition: transform 420ms ease;
  clip-path: polygon(0 0, 100% 0, 50% 70%);
}

.envelope__paper{
  position:absolute;
  left: 10%;
  width: 80%;
  bottom: 10%;
  height: 78%;
  border-radius: 14px;
  transform: translateY(42%) scale(.98);
  transition: transform 520ms ease;
  box-shadow: 0 16px 40px rgba(0,0,0,.40);

  /* “paper” but darko */
  background:
    radial-gradient(600px 220px at 20% 20%, rgba(255,59,212,.12), transparent 60%),
    radial-gradient(520px 240px at 80% 80%, rgba(56,232,255,.10), transparent 60%),
    rgba(10,10,12,.85);
  border: 1px solid rgba(255,255,255,.14);
}

/* OPEN state */
.hero.isOpen .envelope__flap{ transform: rotateX(165deg); }
.hero.isOpen .envelope__paper{ transform: translateY(-10%) scale(1); }

/* subtle “glitch flicker” on open */
.hero.isOpen .envelope{
  animation: flicker 900ms linear 1;
}
@keyframes flicker{
  0%,100%{ filter:none; }
  15%{ filter:contrast(1.05) saturate(1.05); }
  22%{ filter:contrast(1.10) saturate(1.10); }
  27%{ filter:none; }
  35%{ filter:contrast(1.07) saturate(1.06); }
  55%{ filter:none; }
}

/* Letter panel */
.letter{
  position:absolute;
  inset: 18px;
  pointer-events:none;
  opacity:0;
  transform: translateY(10px);
  transition: opacity 240ms ease, transform 240ms ease;
}
.hero.isOpen .letter{
  opacity:1;
  transform: translateY(0);
  pointer-events:auto;
}
.letter__inner{
  height:100%;
  border-radius: 18px;
  background:
    radial-gradient(700px 280px at 20% 10%, rgba(255,59,212,.10), transparent 65%),
    radial-gradient(650px 300px at 85% 120%, rgba(56,232,255,.08), transparent 60%),
    rgba(8,8,10,.78);
  border: 1px solid rgba(255,255,255,.14);
  box-shadow: var(--shadow);
  padding: 22px;
  display:flex;
  flex-direction:column;
  gap: 14px;
  backdrop-filter: blur(8px);
}

.letter__title{
  font-family:var(--mono);
  font-size: 14px;
  letter-spacing:.18em;
  text-transform:uppercase;
  opacity:.9;
}
.letter__hint{
  font-size: 12px;
  opacity:.55;
}
.letter__body{
  flex:1;
  padding: 14px;
  border-radius: 14px;
  background: rgba(255,255,255,.03);
  border: 1px solid rgba(255,255,255,.12);
  overflow:auto;
  line-height:1.55;
  color: rgba(255,255,255,.92);
}
.letter__body:focus{ outline: 2px solid rgba(255,59,212,.30); }
.pill{
  font-family:var(--mono);
  font-size: 11px;
  opacity:.7;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.03);
}

/* PLAYER STAGE */
.stage{
  min-height: 100vh;
  display:grid;
  place-items:center;
  padding: 60px 20px;
}

/* Center card with “metal” vibe */
.playerCard{
  width: min(580px, 94vw);
  border-radius: var(--radius);
  border: 1px solid rgba(255,255,255,.14);
  background:
    linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02)),
    radial-gradient(700px 320px at 20% 0%, rgba(255,59,212,.10), transparent 65%),
    radial-gradient(620px 320px at 85% 120%, rgba(56,232,255,.08), transparent 60%);
  box-shadow: var(--shadow);
  padding: 22px;
  display:flex;
  flex-direction:column;
  gap: 16px;
  position:relative;
  overflow:hidden;
}

/* small corner “neon cut” */
.playerCard::before{
  content:"";
  position:absolute;
  inset:-1px;
  background:
    linear-gradient(90deg, rgba(255,59,212,.25), transparent 35%),
    linear-gradient(180deg, rgba(56,232,255,.18), transparent 40%);
  opacity:.35;
  pointer-events:none;
  mix-blend-mode:screen;
}

.playerTop{
  display:flex;
  justify-content:space-between;
  gap: 16px;
  align-items:flex-start;
}

.brand__title{
  font-family:var(--mono);
  font-size: 14px;
  letter-spacing:.18em;
  text-transform:uppercase;
}
.brand__sub{
  font-size: 12px;
  opacity:.6;
}

.now{ text-align:right; }
.now__title{
  font-size: 14px;
  opacity:.95;
}
.now__meta{
  font-family:var(--mono);
  font-size: 12px;
  opacity:.65;
  margin-top:4px;
}

/* Buttons */
.controls{
  display:flex;
  gap: 12px;
  justify-content:center;
  align-items:center;
}

.iconBtn, .playBtn{
  border: 1px solid rgba(255,255,255,.16);
  background: rgba(255,255,255,.03);
  color: var(--fg);
  border-radius: 14px;
  padding: 10px 14px;
  cursor:pointer;
  transition: transform 120ms ease, border-color 120ms ease, background 120ms ease, box-shadow 120ms ease;
  backdrop-filter: blur(6px);
}
.iconBtn:hover, .playBtn:hover{
  border-color: rgba(255,255,255,.35);
  background: rgba(255,255,255,.06);
  box-shadow: 0 0 0 2px rgba(255,59,212,.12);
}
.iconBtn:active, .playBtn:active{ transform: scale(.98); }

.playBtn{
  min-width: 118px;
  font-weight: 700;
  letter-spacing:.06em;
  text-transform:uppercase;
  font-family:var(--mono);
}

/* Progress bar (more “industrial”) */
.progress{ width:100%; }
#seek{
  width: 100%;
  appearance:none;
  height: 6px;
  border-radius: 999px;
  background: rgba(255,255,255,.10);
  border: 1px solid rgba(255,255,255,.10);
  outline:none;
}
#seek::-webkit-slider-thumb{
  appearance:none;
  width: 18px;
  height: 18px;
  border-radius: 6px;
  background: linear-gradient(135deg, rgba(255,59,212,.95), rgba(56,232,255,.85));
  border: 1px solid rgba(255,255,255,.22);
  box-shadow: 0 10px 20px rgba(0,0,0,.55);
}
#seek::-moz-range-thumb{
  width: 18px;
  height: 18px;
  border-radius: 6px;
  background: linear-gradient(135deg, rgba(255,59,212,.95), rgba(56,232,255,.85));
  border: 1px solid rgba(255,255,255,.22);
  box-shadow: 0 10px 20px rgba(0,0,0,.55);
}

/* Track list */
.trackList{
  list-style:none;
  padding:0;
  margin:0;
  border-top: 1px solid rgba(255,255,255,.12);
}
.trackList li{
  display:flex;
  justify-content:space-between;
  gap: 10px;
  padding: 12px 6px;
  border-bottom: 1px solid rgba(255,255,255,.10);
  cursor:pointer;
  opacity:.70;
  transition: opacity 120ms ease, transform 120ms ease;
}
.trackList li:hover{ opacity:1; transform: translateX(2px); }
.trackList li.active{
  opacity:1;
}
.trackList li.active .tname{
  color: var(--fg);
}
.trackList .tname{
  font-size: 14px;
  letter-spacing:.02em;
}
.trackList .tdur{
  font-family:var(--mono);
  font-size: 12px;
  opacity:.6;
}

/* Small responsive */
@media (max-width: 420px){
  .playerTop{ flex-direction:column; align-items:flex-start; }
  .now{ text-align:left; }
}
/* --- Glitch FX (subtle) --- */
.glitchBurst{
  animation: glitchBurst 260ms steps(2) 1;
}

@keyframes glitchBurst{
  0% { filter: none; transform: translate3d(0,0,0); }
  20% { filter: contrast(1.12) saturate(1.1) hue-rotate(8deg); transform: translate3d(1px,0,0); }
  40% { filter: contrast(1.22) saturate(1.15) hue-rotate(-10deg); transform: translate3d(-1px,1px,0); }
  60% { filter: contrast(1.10) saturate(1.05); transform: translate3d(2px,-1px,0); }
  100% { filter: none; transform: translate3d(0,0,0); }
}

.scanFlash::after{
  content:"";
  position:absolute;
  left:-10%;
  right:-10%;
  top:0;
  height: 18%;
  background: linear-gradient(180deg, rgba(255,255,255,.10), transparent);
  opacity: .55;
  pointer-events:none;
  animation: scanFlash 220ms ease 1;
}

@keyframes scanFlash{
  0%{ transform: translateY(-120%); opacity:.0; }
  40%{ opacity:.55; }
  100%{ transform: translateY(520%); opacity:0; }
}

.shakeTiny{
  animation: shakeTiny 180ms linear 1;
}
@keyframes shakeTiny{
  0%{ transform: translate3d(0,0,0); }
  25%{ transform: translate3d(1px,0,0); }
  50%{ transform: translate3d(-1px,1px,0); }
  75%{ transform: translate3d(1px,-1px,0); }
  100%{ transform: translate3d(0,0,0); }
}
